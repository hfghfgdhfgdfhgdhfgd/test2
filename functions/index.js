!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=11)}([function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("zlib")},function(e,t,r){const s=r(10);class i{constructor(...e){this.handler=i.compose(e)}use(...e){return this.handler=i.compose([this.handler,...e]),this}on(e,...t){return this.use(i.mount(e,...t))}hears(e,...t){return this.use(i.hears(e,...t))}command(e,...t){return this.use(i.command(e,...t))}action(e,...t){return this.use(i.action(e,...t))}inlineQuery(e,...t){return this.use(i.inlineQuery(e,...t))}gameQuery(...e){return this.use(i.gameQuery(...e))}drop(e){return this.use(i.drop(e))}filter(e){return this.use(i.filter(e))}entity(...e){return this.use(i.entity(...e))}email(...e){return this.use(i.email(...e))}url(...e){return this.use(i.url(...e))}textLink(...e){return this.use(i.textLink(...e))}textMention(...e){return this.use(i.textMention(...e))}mention(...e){return this.use(i.mention(...e))}phone(...e){return this.use(i.phone(...e))}hashtag(...e){return this.use(i.hashtag(...e))}cashtag(...e){return this.use(i.cashtag(...e))}start(...e){return this.command("start",i.tap(e=>{e.startPayload=e.message.text.substring(7)}),...e)}help(...e){return this.command("help",...e)}settings(...e){return this.command("settings",...e)}middleware(){return this.handler}static reply(...e){return t=>t.reply(...e)}static catchAll(...e){return i.catch(e=>{console.error(),console.error((e.stack||e.toString()).replace(/^/gm,"  ")),console.error()},...e)}static catch(e,...t){const r=i.compose(t);return(t,s)=>Promise.resolve(r(t,s)).catch(r=>e(r,t))}static fork(e){const t=i.unwrap(e);return(e,r)=>(setImmediate(t,e,i.safePassThru()),r(e))}static tap(e){const t=i.unwrap(e);return(e,r)=>Promise.resolve(t(e,i.safePassThru())).then(()=>r(e))}static passThru(){return(e,t)=>t(e)}static safePassThru(){return(e,t)=>"function"==typeof t?t(e):Promise.resolve()}static lazy(e){if("function"!=typeof e)throw new Error("Argument must be a function");return(t,r)=>Promise.resolve(e(t)).then(e=>i.unwrap(e)(t,r))}static log(e=console.log){return i.fork(t=>e(JSON.stringify(t.update,null,2)))}static branch(e,t,r){return"function"!=typeof e?e?t:r:i.lazy(s=>Promise.resolve(e(s)).then(e=>e?t:r))}static optional(e,...t){return i.branch(e,i.compose(t),i.safePassThru())}static filter(e){return i.branch(e,i.safePassThru(),()=>{})}static drop(e){return i.branch(e,()=>{},i.safePassThru())}static dispatch(e,t){return"function"==typeof e?i.lazy(r=>Promise.resolve(e(r)).then(e=>t[e])):t[e]}static mount(e,...t){const r=o(e);return i.optional(e=>r.includes(e.updateType)||r.some(t=>e.updateSubTypes.includes(t)),...t)}static entity(e,...t){if("function"!=typeof e){const r=o(e);return i.entity(({type:e})=>r.includes(e),...t)}return i.optional(t=>{const r=t.message||t.channelPost,s=r&&(r.entities||r.caption_entities),i=r&&(r.text||r.caption);return s&&s.some(r=>e(r,i.substring(r.offset,r.offset+r.length),t))},...t)}static entityText(e,t,...r){if(0===r.length)return Array.isArray(t)?i.entity(e,...t):i.entity(e,t);const s=n(t);return i.entity(({type:t},r,i)=>{if(t!==e)return!1;for(const e of s)if(i.match=e(r,i),i.match)return!0},...r)}static email(e,...t){return i.entityText("email",e,...t)}static phone(e,...t){return i.entityText("phone_number",e,...t)}static url(e,...t){return i.entityText("url",e,...t)}static textLink(e,...t){return i.entityText("text_link",e,...t)}static textMention(e,...t){return i.entityText("text_mention",e,...t)}static mention(e,...t){return i.entityText("mention",o(e,"@"),...t)}static hashtag(e,...t){return i.entityText("hashtag",o(e,"#"),...t)}static cashtag(e,...t){return i.entityText("cashtag",o(e,"$"),...t)}static match(e,...t){return i.optional(t=>{const r=t.message&&(t.message.caption||t.message.text)||t.callbackQuery&&t.callbackQuery.data||t.inlineQuery&&t.inlineQuery.query;for(const s of e)if(t.match=s(r,t),t.match)return!0},...t)}static hears(e,...t){return i.mount("text",i.match(n(e),...t))}static command(e,...t){if(0===t.length)return i.entity(["bot_command"],e);const r=o(e,"/");return i.mount("text",i.lazy(e=>{const s=!e.me||"group"!==e.chat.type&&"supergroup"!==e.chat.type?[]:r.map(t=>`${t}@${e.me}`);return i.entity(({offset:e,type:t},i)=>0===e&&"bot_command"===t&&(r.includes(i)||s.includes(i)),...t)}))}static action(e,...t){return i.mount("callback_query",i.match(n(e),...t))}static inlineQuery(e,...t){return i.mount("inline_query",i.match(n(e),...t))}static acl(e,...t){if("function"==typeof e)return i.optional(e,...t);const r=Array.isArray(e)?e:[e];return i.optional(e=>!e.from||r.includes(e.from.id),...t)}static memberStatus(e,...t){const r=Array.isArray(e)?e:[e];return i.optional(e=>e.message&&e.getChatMember(e.message.from.id).then(e=>e&&r.includes(e.status)),...t)}static admin(...e){return i.memberStatus(["administrator","creator"],...e)}static creator(...e){return i.memberStatus("creator",...e)}static chatType(e,...t){const r=Array.isArray(e)?e:[e];return i.optional(e=>e.chat&&r.includes(e.chat.type),...t)}static privateChat(...e){return i.chatType("private",...e)}static groupChat(...e){return i.chatType(["group","supergroup"],...e)}static gameQuery(...e){return i.mount("callback_query",i.optional(e=>e.callbackQuery.game_short_name,...e))}static unwrap(e){if(!e)throw new Error("Handler is undefined");return"function"==typeof e.middleware?e.middleware():e}static compose(e){if(!Array.isArray(e))throw new Error("Middlewares must be an array");return 0===e.length?i.safePassThru():1===e.length?i.unwrap(e[0]):(t,r)=>{let n=-1;return function t(o,a){if(!(a instanceof s))return Promise.reject(new Error("next(ctx) called with invalid context"));if(o<=n)return Promise.reject(new Error("next() called multiple times"));n=o;const c=e[o]?i.unwrap(e[o]):r;if(!c)return Promise.resolve();try{return Promise.resolve(c(a,(e=a)=>t(o+1,e)))}catch(e){return Promise.reject(e)}}(0,t)}}}function n(e){return Array.isArray(e)||(e=[e]),e.map(e=>{if(!e)throw new Error("Invalid trigger");return"function"==typeof e?e:e instanceof RegExp?t=>(e.lastIndex=0,e.exec(t||"")):t=>e===t?t:null})}function o(e,t){return(Array.isArray(e)?e:[e]).filter(Boolean).map(e=>t&&"string"==typeof e&&!e.startsWith(t)?`${t}${e}`:e)}e.exports=i},function(e,t){e.exports=require("url")},function(e,t,r){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(13):e.exports=r(15)},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("http")},function(e,t){class r{forceReply(e=!0){return this.force_reply=e,this}removeKeyboard(e=!0){return this.remove_keyboard=e,this}selective(e=!0){return this.selective=e,this}extra(e){return{reply_markup:{...this},...e}}keyboard(e,t){const r=s(e,{columns:1,...t});return r&&r.length>0&&(this.keyboard=r),this}resize(e=!0){return this.resize_keyboard=e,this}oneTime(e=!0){return this.one_time_keyboard=e,this}inlineKeyboard(e,t){const r=s(e,{columns:e.length,...t});return r&&r.length>0&&(this.inline_keyboard=r),this}button(e,t){return r.button(e,t)}contactRequestButton(e,t){return r.contactRequestButton(e,t)}locationRequestButton(e,t){return r.locationRequestButton(e,t)}urlButton(e,t,s){return r.urlButton(e,t,s)}callbackButton(e,t,s){return r.callbackButton(e,t,s)}switchToChatButton(e,t,s){return r.switchToChatButton(e,t,s)}switchToCurrentChatButton(e,t,s){return r.switchToCurrentChatButton(e,t,s)}gameButton(e,t){return r.gameButton(e,t)}payButton(e,t){return r.payButton(e,t)}loginButton(e,t,s,i){return r.loginButton(e,t,s,i)}static removeKeyboard(e){return(new r).removeKeyboard(e)}static forceReply(e){return(new r).forceReply(e)}static keyboard(e,t){return(new r).keyboard(e,t)}static inlineKeyboard(e,t){return(new r).inlineKeyboard(e,t)}static resize(e=!0){return(new r).resize(e)}static selective(e=!0){return(new r).selective(e)}static oneTime(e=!0){return(new r).oneTime(e)}static button(e,t=!1){return{text:e,hide:t}}static contactRequestButton(e,t=!1){return{text:e,request_contact:!0,hide:t}}static locationRequestButton(e,t=!1){return{text:e,request_location:!0,hide:t}}static pollRequestButton(e,t,r=!1){return{text:e,request_poll:{type:t},hide:r}}static urlButton(e,t,r=!1){return{text:e,url:t,hide:r}}static callbackButton(e,t,r=!1){return{text:e,callback_data:t,hide:r}}static switchToChatButton(e,t,r=!1){return{text:e,switch_inline_query:t,hide:r}}static switchToCurrentChatButton(e,t,r=!1){return{text:e,switch_inline_query_current_chat:t,hide:r}}static gameButton(e,t=!1){return{text:e,callback_game:{},hide:t}}static payButton(e,t=!1){return{text:e,pay:!0,hide:t}}static loginButton(e,t,r={},s=!1){return{text:e,login_url:{...r,url:t},hide:s}}static formatHTML(e="",t=[]){const r=[...e],s=[...t],i=[],n=[];for(let e=0;e<r.length;e++){for(;;){const t=s.findIndex(t=>t.offset===e);if(-1===t)break;const r=s[t];switch(r.type){case"bold":n.push("<b>");break;case"italic":n.push("<i>");break;case"code":n.push("<code>");break;case"pre":r.language?n.push(`<pre><code class="language-${r.language}">`):n.push("<pre>");break;case"strikethrough":n.push("<s>");break;case"underline":n.push("<u>");break;case"text_mention":n.push(`<a href="tg://user?id=${r.user.id}">`);break;case"text_link":n.push(`<a href="${r.url}">`)}i.unshift(r),s.splice(t,1)}for(n.push(r[e]);;){const t=i.findIndex(t=>t.offset+t.length-1===e);if(-1===t)break;const r=i[t];switch(r.type){case"bold":n.push("</b>");break;case"italic":n.push("</i>");break;case"code":n.push("</code>");break;case"pre":r.language?n.push("</code></pre>"):n.push("</pre>");break;case"strikethrough":n.push("</s>");break;case"underline":n.push("</u>");break;case"text_mention":case"text_link":n.push("</a>")}i.splice(t,1)}}return n.join("")}}function s(e,t){const r=[];if(!Array.isArray(e))return r;if(e.find(Array.isArray))return e.map(e=>e.filter(e=>!e.hide));const s=t.wrap?t.wrap:(e,r,s)=>s.length>=t.columns;let i=[],n=0;for(const t of e.filter(e=>!e.hide))s(t,n,i)&&i.length>0&&(r.push(i),i=[]),i.push(t),n++;return i.length>0&&r.push(i),r}e.exports=r},function(e,t,r){e.exports=function(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return s.colors[Math.abs(t)%s.colors.length]}function s(e){let r;function o(...e){if(!o.enabled)return;const t=o,i=Number(new Date),n=i-(r||i);t.diff=n,t.prev=r,t.curr=i,r=i,e[0]=s.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,i)=>{if("%%"===r)return r;a++;const n=s.formatters[i];if("function"==typeof n){const s=e[a];r=n.call(t,s),e.splice(a,1),a--}return r}),s.formatArgs.call(t,e),(t.log||s.log).apply(t,e)}return o.namespace=e,o.enabled=s.enabled(e),o.useColors=s.useColors(),o.color=t(e),o.destroy=i,o.extend=n,"function"==typeof s.init&&s.init(o),s.instances.push(o),o}function i(){const e=s.instances.indexOf(this);return-1!==e&&(s.instances.splice(e,1),!0)}function n(e,t){const r=s(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return s.debug=s,s.default=s,s.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},s.disable=function(){const e=[...s.names.map(o),...s.skips.map(o).map(e=>"-"+e)].join(",");return s.enable(""),e},s.enable=function(e){let t;s.save(e),s.names=[],s.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?s.skips.push(new RegExp("^"+e.substr(1)+"$")):s.names.push(new RegExp("^"+e+"$")));for(t=0;t<s.instances.length;t++){const e=s.instances[t];e.enabled=s.enabled(e.namespace)}},s.enabled=function(e){if("*"===e[e.length-1])return!0;let t,r;for(t=0,r=s.skips.length;t<r;t++)if(s.skips[t].test(e))return!1;for(t=0,r=s.names.length;t<r;t++)if(s.names[t].test(e))return!0;return!1},s.humanize=r(14),Object.keys(e).forEach(t=>{s[t]=e[t]}),s.instances=[],s.names=[],s.skips=[],s.formatters={},s.selectColor=t,s.enable(s.load()),s}},function(e,t){e.exports=require("crypto")},function(e,t){const r=["callback_query","channel_post","chosen_inline_result","edited_channel_post","edited_message","inline_query","shipping_query","pre_checkout_query","message","poll","poll_answer"],s=["voice","video_note","video","animation","venue","text","supergroup_chat_created","successful_payment","sticker","pinned_message","photo","new_chat_title","new_chat_photo","new_chat_members","migrate_to_chat_id","migrate_from_chat_id","location","left_chat_member","invoice","group_chat_created","game","dice","document","delete_chat_photo","contact","channel_chat_created","audio","connected_website","passport_data","poll","forward_date"],i={forward_date:"forward"};class n{constructor(e,t,o){this.tg=t,this.update=e,this.options=o,this.updateType=r.find(e=>e in this.update),"message"===this.updateType||this.options.channelMode&&"channel_post"===this.updateType?this.updateSubTypes=s.filter(e=>e in this.update[this.updateType]).map(e=>i[e]||e):this.updateSubTypes=[],Object.getOwnPropertyNames(n.prototype).filter(e=>"constructor"!==e&&"function"==typeof this[e]).forEach(e=>this[e]=this[e].bind(this))}get me(){return this.options&&this.options.username}get telegram(){return this.tg}get message(){return this.update.message}get editedMessage(){return this.update.edited_message}get inlineQuery(){return this.update.inline_query}get shippingQuery(){return this.update.shipping_query}get preCheckoutQuery(){return this.update.pre_checkout_query}get chosenInlineResult(){return this.update.chosen_inline_result}get channelPost(){return this.update.channel_post}get editedChannelPost(){return this.update.edited_channel_post}get callbackQuery(){return this.update.callback_query}get poll(){return this.update.poll}get pollAnswer(){return this.update.poll_answer}get chat(){return this.message&&this.message.chat||this.editedMessage&&this.editedMessage.chat||this.callbackQuery&&this.callbackQuery.message&&this.callbackQuery.message.chat||this.channelPost&&this.channelPost.chat||this.editedChannelPost&&this.editedChannelPost.chat}get from(){return this.message&&this.message.from||this.editedMessage&&this.editedMessage.from||this.callbackQuery&&this.callbackQuery.from||this.inlineQuery&&this.inlineQuery.from||this.channelPost&&this.channelPost.from||this.editedChannelPost&&this.editedChannelPost.from||this.shippingQuery&&this.shippingQuery.from||this.preCheckoutQuery&&this.preCheckoutQuery.from||this.chosenInlineResult&&this.chosenInlineResult.from}get inlineMessageId(){return this.callbackQuery&&this.callbackQuery.inline_message_id||this.chosenInlineResult&&this.chosenInlineResult.inline_message_id}get passportData(){return this.message&&this.message.passport_data}get state(){return this.contextState||(this.contextState={}),this.contextState}set state(e){this.contextState={...e}}get webhookReply(){return this.tg.webhookReply}set webhookReply(e){this.tg.webhookReply=e}assert(e,t){if(!e)throw new Error(`Telegraf: "${t}" isn't available for "${this.updateType}::${this.updateSubTypes}"`)}answerInlineQuery(...e){return this.assert(this.inlineQuery,"answerInlineQuery"),this.telegram.answerInlineQuery(this.inlineQuery.id,...e)}answerCbQuery(...e){return this.assert(this.callbackQuery,"answerCbQuery"),this.telegram.answerCbQuery(this.callbackQuery.id,...e)}answerGameQuery(...e){return this.assert(this.callbackQuery,"answerGameQuery"),this.telegram.answerGameQuery(this.callbackQuery.id,...e)}answerShippingQuery(...e){return this.assert(this.shippingQuery,"answerShippingQuery"),this.telegram.answerShippingQuery(this.shippingQuery.id,...e)}answerPreCheckoutQuery(...e){return this.assert(this.preCheckoutQuery,"answerPreCheckoutQuery"),this.telegram.answerPreCheckoutQuery(this.preCheckoutQuery.id,...e)}editMessageText(e,t){return this.assert(this.callbackQuery||this.inlineMessageId,"editMessageText"),this.inlineMessageId?this.telegram.editMessageText(void 0,void 0,this.inlineMessageId,e,t):this.telegram.editMessageText(this.chat.id,this.callbackQuery.message.message_id,void 0,e,t)}editMessageCaption(e,t){return this.assert(this.callbackQuery||this.inlineMessageId,"editMessageCaption"),this.inlineMessageId?this.telegram.editMessageCaption(void 0,void 0,this.inlineMessageId,e,t):this.telegram.editMessageCaption(this.chat.id,this.callbackQuery.message.message_id,void 0,e,t)}editMessageMedia(e,t){return this.assert(this.callbackQuery||this.inlineMessageId,"editMessageMedia"),this.inlineMessageId?this.telegram.editMessageMedia(void 0,void 0,this.inlineMessageId,e,t):this.telegram.editMessageMedia(this.chat.id,this.callbackQuery.message.message_id,void 0,e,t)}editMessageReplyMarkup(e){return this.assert(this.callbackQuery||this.inlineMessageId,"editMessageReplyMarkup"),this.inlineMessageId?this.telegram.editMessageReplyMarkup(void 0,void 0,this.inlineMessageId,e):this.telegram.editMessageReplyMarkup(this.chat.id,this.callbackQuery.message.message_id,void 0,e)}editMessageLiveLocation(e,t,r){return this.assert(this.callbackQuery||this.inlineMessageId,"editMessageLiveLocation"),this.inlineMessageId?this.telegram.editMessageLiveLocation(e,t,void 0,void 0,this.inlineMessageId,r):this.telegram.editMessageLiveLocation(e,t,this.chat.id,this.callbackQuery.message.message_id,void 0,r)}stopMessageLiveLocation(e){return this.assert(this.callbackQuery||this.inlineMessageId,"stopMessageLiveLocation"),this.inlineMessageId?this.telegram.stopMessageLiveLocation(void 0,void 0,this.inlineMessageId,e):this.telegram.stopMessageLiveLocation(this.chat.id,this.callbackQuery.message.message_id,void 0,e)}reply(...e){return this.assert(this.chat,"reply"),this.telegram.sendMessage(this.chat.id,...e)}getChat(...e){return this.assert(this.chat,"getChat"),this.telegram.getChat(this.chat.id,...e)}exportChatInviteLink(...e){return this.assert(this.chat,"exportChatInviteLink"),this.telegram.exportChatInviteLink(this.chat.id,...e)}kickChatMember(...e){return this.assert(this.chat,"kickChatMember"),this.telegram.kickChatMember(this.chat.id,...e)}unbanChatMember(...e){return this.assert(this.chat,"unbanChatMember"),this.telegram.unbanChatMember(this.chat.id,...e)}restrictChatMember(...e){return this.assert(this.chat,"restrictChatMember"),this.telegram.restrictChatMember(this.chat.id,...e)}promoteChatMember(...e){return this.assert(this.chat,"promoteChatMember"),this.telegram.promoteChatMember(this.chat.id,...e)}setChatAdministratorCustomTitle(...e){return this.assert(this.chat,"setChatAdministratorCustomTitle"),this.telegram.setChatAdministratorCustomTitle(this.chat.id,...e)}setChatPhoto(...e){return this.assert(this.chat,"setChatPhoto"),this.telegram.setChatPhoto(this.chat.id,...e)}deleteChatPhoto(...e){return this.assert(this.chat,"deleteChatPhoto"),this.telegram.deleteChatPhoto(this.chat.id,...e)}setChatTitle(...e){return this.assert(this.chat,"setChatTitle"),this.telegram.setChatTitle(this.chat.id,...e)}setChatDescription(...e){return this.assert(this.chat,"setChatDescription"),this.telegram.setChatDescription(this.chat.id,...e)}pinChatMessage(...e){return this.assert(this.chat,"pinChatMessage"),this.telegram.pinChatMessage(this.chat.id,...e)}unpinChatMessage(...e){return this.assert(this.chat,"unpinChatMessage"),this.telegram.unpinChatMessage(this.chat.id,...e)}leaveChat(...e){return this.assert(this.chat,"leaveChat"),this.telegram.leaveChat(this.chat.id,...e)}setChatPermissions(...e){return this.assert(this.chat,"setChatPermissions"),this.telegram.setChatPermissions(this.chat.id,...e)}getChatAdministrators(...e){return this.assert(this.chat,"getChatAdministrators"),this.telegram.getChatAdministrators(this.chat.id,...e)}getChatMember(...e){return this.assert(this.chat,"getChatMember"),this.telegram.getChatMember(this.chat.id,...e)}getChatMembersCount(...e){return this.assert(this.chat,"getChatMembersCount"),this.telegram.getChatMembersCount(this.chat.id,...e)}setPassportDataErrors(e){return this.assert(this.chat,"setPassportDataErrors"),this.telegram.setPassportDataErrors(this.from.id,e)}replyWithPhoto(...e){return this.assert(this.chat,"replyWithPhoto"),this.telegram.sendPhoto(this.chat.id,...e)}replyWithMediaGroup(...e){return this.assert(this.chat,"replyWithMediaGroup"),this.telegram.sendMediaGroup(this.chat.id,...e)}replyWithAudio(...e){return this.assert(this.chat,"replyWithAudio"),this.telegram.sendAudio(this.chat.id,...e)}replyWithDice(...e){return this.assert(this.chat,"replyWithDice"),this.telegram.sendDice(this.chat.id,...e)}replyWithDocument(...e){return this.assert(this.chat,"replyWithDocument"),this.telegram.sendDocument(this.chat.id,...e)}replyWithSticker(...e){return this.assert(this.chat,"replyWithSticker"),this.telegram.sendSticker(this.chat.id,...e)}replyWithVideo(...e){return this.assert(this.chat,"replyWithVideo"),this.telegram.sendVideo(this.chat.id,...e)}replyWithAnimation(...e){return this.assert(this.chat,"replyWithAnimation"),this.telegram.sendAnimation(this.chat.id,...e)}replyWithVideoNote(...e){return this.assert(this.chat,"replyWithVideoNote"),this.telegram.sendVideoNote(this.chat.id,...e)}replyWithInvoice(...e){return this.assert(this.chat,"replyWithInvoice"),this.telegram.sendInvoice(this.chat.id,...e)}replyWithGame(...e){return this.assert(this.chat,"replyWithGame"),this.telegram.sendGame(this.chat.id,...e)}replyWithVoice(...e){return this.assert(this.chat,"replyWithVoice"),this.telegram.sendVoice(this.chat.id,...e)}replyWithPoll(...e){return this.assert(this.chat,"replyWithPoll"),this.telegram.sendPoll(this.chat.id,...e)}replyWithQuiz(...e){return this.assert(this.chat,"replyWithQuiz"),this.telegram.sendQuiz(this.chat.id,...e)}stopPoll(...e){return this.assert(this.chat,"stopPoll"),this.telegram.stopPoll(this.chat.id,...e)}replyWithChatAction(...e){return this.assert(this.chat,"replyWithChatAction"),this.telegram.sendChatAction(this.chat.id,...e)}replyWithLocation(...e){return this.assert(this.chat,"replyWithLocation"),this.telegram.sendLocation(this.chat.id,...e)}replyWithVenue(...e){return this.assert(this.chat,"replyWithVenue"),this.telegram.sendVenue(this.chat.id,...e)}replyWithContact(...e){return this.assert(this.from,"replyWithContact"),this.telegram.sendContact(this.chat.id,...e)}getStickerSet(e){return this.telegram.getStickerSet(e)}setChatStickerSet(e){return this.assert(this.chat,"setChatStickerSet"),this.telegram.setChatStickerSet(this.chat.id,e)}deleteChatStickerSet(){return this.assert(this.chat,"deleteChatStickerSet"),this.telegram.deleteChatStickerSet(this.chat.id)}setStickerPositionInSet(e,t){return this.telegram.setStickerPositionInSet(e,t)}setStickerSetThumb(...e){return this.telegram.setStickerSetThumb(...e)}deleteStickerFromSet(e){return this.telegram.deleteStickerFromSet(e)}uploadStickerFile(...e){return this.assert(this.from,"uploadStickerFile"),this.telegram.uploadStickerFile(this.from.id,...e)}createNewStickerSet(...e){return this.assert(this.from,"createNewStickerSet"),this.telegram.createNewStickerSet(this.from.id,...e)}addStickerToSet(...e){return this.assert(this.from,"addStickerToSet"),this.telegram.addStickerToSet(this.from.id,...e)}getMyCommands(){return this.telegram.getMyCommands()}setMyCommands(...e){return this.telegram.setMyCommands(...e)}replyWithMarkdown(e,t){return this.reply(e,{parse_mode:"Markdown",...t})}replyWithMarkdownV2(e,t){return this.reply(e,{parse_mode:"MarkdownV2",...t})}replyWithHTML(e,t){return this.reply(e,{parse_mode:"HTML",...t})}deleteMessage(e){if(this.assert(this.chat,"deleteMessage"),void 0!==e)return this.telegram.deleteMessage(this.chat.id,e);const t=this.message||this.editedMessage||this.channelPost||this.editedChannelPost||this.callbackQuery&&this.callbackQuery.message;return this.assert(t,"deleteMessage"),this.telegram.deleteMessage(this.chat.id,t.message_id)}forwardMessage(e,t){this.assert(this.chat,"forwardMessage");const r=this.message||this.editedMessage||this.channelPost||this.editedChannelPost||this.callbackQuery&&this.callbackQuery.message;return this.assert(r,"forwardMessage"),this.telegram.forwardMessage(e,this.chat.id,r.message_id,t)}}e.exports=n},function(e,t,r){const s=new(r(12).Telegraf)("1180083258:AAHQDis2A4_OGsdjVBYiXTvhoPNkUVhYJwk");s.start(e=>e.reply("Welcome")),s.help(e=>e.reply("Send me a sticker")),s.on("sticker",e=>e.reply("ðŸ‘")),s.on("message",e=>e.reply(e.message)),s.hears("hi",e=>e.reply("Hey there")),s.launch(),t.handler=async(e,t)=>({statusCode:200,body:"We are now split testing!"})},function(e,t,r){const s=r(4)("telegraf:core"),i=r(21),n=r(30),o=r(2),a=r(7),c=r(31),h=r(32),u=r(33),l=r(35),d=r(10),p=r(36),m=r(9),{URL:f}=r(3),g={retryAfter:1,handlerTimeout:0,contextType:d},y=()=>{};class b extends o{constructor(e,t){super(),this.options={...g,...t},this.token=e,this.handleError=e=>{throw console.error(),console.error((e.stack||e.toString()).replace(/^/gm,"  ")),console.error(),e},this.context={},this.polling={offset:0,started:!1}}set token(e){this.telegram=new i(e,this.telegram?this.telegram.options:this.options.telegram)}get token(){return this.telegram.token}set webhookReply(e){this.telegram.webhookReply=e}get webhookReply(){return this.telegram.webhookReply}catch(e){return this.handleError=e,this}webhookCallback(e="/"){return p(e,(e,t)=>this.handleUpdate(e,t),s)}startPolling(e=30,t=100,r,s=y){return this.polling.timeout=e,this.polling.limit=t,this.polling.allowedUpdates=r?Array.isArray(r)?r:[""+r]:null,this.polling.stopCallback=s,this.polling.started||(this.polling.started=!0,this.fetchUpdates()),this}startWebhook(e,t,i,n,o){const a=this.webhookCallback(e),c=o&&"function"==typeof o?(e,t)=>a(e,t,()=>o(e,t)):a;return this.webhookServer=t?r(5).createServer(t,c):r(6).createServer(c),this.webhookServer.listen(i,n,()=>{s("Webhook listening on port: %s",i)}),this}launch(e={}){return s("Connecting to Telegram"),this.telegram.getMe().then(t=>{if(s("Launching @"+t.username),this.options.username=t.username,this.context.botInfo=t,!e.webhook){const{timeout:t,limit:r,allowedUpdates:i,stopCallback:n}=e.polling||{};return this.telegram.deleteWebhook().then(()=>this.startPolling(t,r,i,n)).then(()=>s("Bot started with long-polling"))}if("string"!=typeof e.webhook.domain&&"string"!=typeof e.webhook.hookPath)throw new Error("Webhook domain or webhook path is required");let r=e.webhook.domain||"";(r.startsWith("https://")||r.startsWith("http://"))&&(r=new f(r).host);const i=e.webhook.hookPath||"/telegraf/"+m.randomBytes(32).toString("hex"),{port:n,host:o,tlsOptions:a,cb:c}=e.webhook;if(this.startWebhook(i,a,n,o,c),r)return this.telegram.setWebhook(`https://${r}${i}`).then(()=>s("Bot started with webhook @ https://"+r));s("Bot started with webhook")}).catch(e=>{console.error("Launch failed"),console.error(e.stack||e.toString())})}stop(e=y){return s("Stopping bot..."),new Promise(t=>{const r=()=>t()&e();return this.webhookServer?this.webhookServer.close(r):this.polling.started?(this.polling.stopCallback=r,void(this.polling.started=!1)):r()})}handleUpdates(e){if(!Array.isArray(e))return Promise.reject(new Error("Updates must be an array"));const t=Promise.all(e.map(e=>this.handleUpdate(e)));return 0===this.options.handlerTimeout?t:Promise.race([t,new Promise(e=>setTimeout(e,this.options.handlerTimeout))])}handleUpdate(e,t){s("Processing update",e.update_id);const r=new i(this.token,this.telegram.options,t),n=new(0,this.options.contextType)(e,r,this.options);return Object.assign(n,this.context),this.middleware()(n).catch(e=>this.handleError(e,n))}fetchUpdates(){if(!this.polling.started)return void(this.polling.stopCallback&&this.polling.stopCallback());const{timeout:e,limit:t,offset:r,allowedUpdates:s}=this.polling;this.telegram.getUpdates(e,t,r,s).catch(e=>{if(401===e.code||409===e.code)throw e;const t=e.parameters&&e.parameters.retry_after||this.options.retryAfter;return console.error(`Failed to fetch updates. Waiting: ${t}s`,e.message),new Promise(e=>setTimeout(e,1e3*t,[]))}).then(e=>this.polling.started?this.handleUpdates(e).then(()=>e):[]).catch(e=>(console.error("Failed to process updates.",e),this.polling.started=!1,this.polling.offset=0,this.polling.stopCallback&&this.polling.stopCallback(),[])).then(e=>{e.length>0&&(this.polling.offset=e[e.length-1].update_id+1),this.fetchUpdates()})}}e.exports=Object.assign(b,{Context:d,Composer:o,default:b,Extra:n,Markup:a,Router:h,Telegraf:b,Telegram:i,Stage:u,BaseScene:l,session:c})},function(e,t,r){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let s=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(s++,"%c"===e&&(i=s))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(8)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var r=1e3,s=6e4,i=60*s,n=24*i;function o(e,t,r,s){var i=t>=1.5*r;return Math.round(e/r)+" "+s+(i?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*n;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*s;case"seconds":case"second":case"secs":case"sec":case"s":return o*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=n)return o(e,t,n,"day");if(t>=i)return o(e,t,i,"hour");if(t>=s)return o(e,t,s,"minute");if(t>=r)return o(e,t,r,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=n)return Math.round(e/n)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=s)return Math.round(e/s)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){const s=r(16),i=r(17);t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let s=0;s<r.length;s++)e.inspectOpts[r[s]]=t.inspectOpts[r[s]]},t.log=function(...e){return process.stderr.write(i.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:s,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),n=`  ${i};1m${s} [0m`;r[0]=n+r[0].split("\n").join("\n"+n),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+s+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=r(18);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[r]=s,e},{}),e.exports=r(8)(t);const{formatters:n}=e.exports;n.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},n.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e,t){e.exports=require("tty")},function(e,t){e.exports=require("util")},function(e,t,r){"use strict";const s=r(19),i=r(20),n=process.env;let o;function a(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===o)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==o)return 0;const t=o?1:0;if("win32"===process.platform){const e=s.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in n)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in n)||"codeship"===n.CI_NAME?1:t;if("TEAMCITY_VERSION"in n)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(n.TEAMCITY_VERSION)?1:0;if("truecolor"===n.COLORTERM)return 3;if("TERM_PROGRAM"in n){const e=parseInt((n.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(n.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(n.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(n.TERM)||"COLORTERM"in n?1:(n.TERM,t)}(e))}i("no-color")||i("no-colors")||i("color=false")?o=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(o=!0),"FORCE_COLOR"in n&&(o=0===n.FORCE_COLOR.length||0!==parseInt(n.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(e,t){e.exports=require("os")},function(e,t,r){"use strict";e.exports=(e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",s=t.indexOf(r+e),i=t.indexOf("--");return-1!==s&&(-1===i||s<i)}},function(e,t,r){const s=r(22),i=r(23);e.exports=class extends i{getMe(){return this.callApi("getMe")}getFile(e){return this.callApi("getFile",{file_id:e})}getFileLink(e){return Promise.resolve(e).then(e=>{if(e&&e.file_path)return e;const t=e&&e.file_id?e.file_id:e;return this.getFile(t)}).then(e=>`${this.options.apiRoot}/file/bot${this.token}/${e.file_path}`)}getUpdates(e,t,r,s){const i=`getUpdates?offset=${r}&limit=${t}&timeout=${e}`;return this.callApi(i,{allowed_updates:s})}getWebhookInfo(){return this.callApi("getWebhookInfo")}getGameHighScores(e,t,r,s){return this.callApi("getGameHighScores",{user_id:e,inline_message_id:t,chat_id:r,message_id:s})}setGameScore(e,t,r,s,i,n=!0,o){return this.callApi("setGameScore",{force:o,score:t,user_id:e,inline_message_id:r,chat_id:s,message_id:i,disable_edit_message:!n})}setWebhook(e,t,r,s){return this.callApi("setWebhook",{url:e,certificate:t,max_connections:r,allowed_updates:s})}deleteWebhook(){return this.callApi("deleteWebhook")}sendMessage(e,t,r){return this.callApi("sendMessage",{chat_id:e,text:t,...r})}forwardMessage(e,t,r,s){return this.callApi("forwardMessage",{chat_id:e,from_chat_id:t,message_id:r,...s})}sendChatAction(e,t){return this.callApi("sendChatAction",{chat_id:e,action:t})}getUserProfilePhotos(e,t,r){return this.callApi("getUserProfilePhotos",{user_id:e,offset:t,limit:r})}sendLocation(e,t,r,s){return this.callApi("sendLocation",{chat_id:e,latitude:t,longitude:r,...s})}sendVenue(e,t,r,s,i,n){return this.callApi("sendVenue",{latitude:t,longitude:r,title:s,address:i,chat_id:e,...n})}sendInvoice(e,t,r){return this.callApi("sendInvoice",{chat_id:e,...t,...r})}sendContact(e,t,r,s){return this.callApi("sendContact",{chat_id:e,phone_number:t,first_name:r,...s})}sendPhoto(e,t,r){return this.callApi("sendPhoto",{chat_id:e,photo:t,...r})}sendDice(e,t){return this.callApi("sendDice",{chat_id:e,...t})}sendDocument(e,t,r){return this.callApi("sendDocument",{chat_id:e,document:t,...r})}sendAudio(e,t,r){return this.callApi("sendAudio",{chat_id:e,audio:t,...r})}sendSticker(e,t,r){return this.callApi("sendSticker",{chat_id:e,sticker:t,...r})}sendVideo(e,t,r){return this.callApi("sendVideo",{chat_id:e,video:t,...r})}sendAnimation(e,t,r){return this.callApi("sendAnimation",{chat_id:e,animation:t,...r})}sendVideoNote(e,t,r){return this.callApi("sendVideoNote",{chat_id:e,video_note:t,...r})}sendVoice(e,t,r){return this.callApi("sendVoice",{chat_id:e,voice:t,...r})}sendGame(e,t,r){return this.callApi("sendGame",{chat_id:e,game_short_name:t,...r})}sendMediaGroup(e,t,r){return this.callApi("sendMediaGroup",{chat_id:e,media:t,...r})}sendPoll(e,t,r,s){return this.callApi("sendPoll",{chat_id:e,type:"regular",question:t,options:r,...s})}sendQuiz(e,t,r,s){return this.callApi("sendPoll",{chat_id:e,type:"quiz",question:t,options:r,...s})}stopPoll(e,t,r){return this.callApi("stopPoll",{chat_id:e,message_id:t,...r})}getChat(e){return this.callApi("getChat",{chat_id:e})}getChatAdministrators(e){return this.callApi("getChatAdministrators",{chat_id:e})}getChatMember(e,t){return this.callApi("getChatMember",{chat_id:e,user_id:t})}getChatMembersCount(e){return this.callApi("getChatMembersCount",{chat_id:e})}answerInlineQuery(e,t,r){return this.callApi("answerInlineQuery",{inline_query_id:e,results:t,...r})}setChatPermissions(e,t){return this.callApi("setChatPermissions",{chat_id:e,permissions:t})}kickChatMember(e,t,r){return this.callApi("kickChatMember",{chat_id:e,user_id:t,until_date:r})}promoteChatMember(e,t,r){return this.callApi("promoteChatMember",{chat_id:e,user_id:t,...r})}restrictChatMember(e,t,r){return this.callApi("restrictChatMember",{chat_id:e,user_id:t,...r})}setChatAdministratorCustomTitle(e,t,r){return this.callApi("setChatAdministratorCustomTitle",{chat_id:e,user_id:t,custom_title:r})}exportChatInviteLink(e){return this.callApi("exportChatInviteLink",{chat_id:e})}setChatPhoto(e,t){return this.callApi("setChatPhoto",{chat_id:e,photo:t})}deleteChatPhoto(e){return this.callApi("deleteChatPhoto",{chat_id:e})}setChatTitle(e,t){return this.callApi("setChatTitle",{chat_id:e,title:t})}setChatDescription(e,t){return this.callApi("setChatDescription",{chat_id:e,description:t})}pinChatMessage(e,t,r){return this.callApi("pinChatMessage",{chat_id:e,message_id:t,...r})}unpinChatMessage(e){return this.callApi("unpinChatMessage",{chat_id:e})}leaveChat(e){return this.callApi("leaveChat",{chat_id:e})}unbanChatMember(e,t){return this.callApi("unbanChatMember",{chat_id:e,user_id:t})}answerCbQuery(e,t,r,s){return this.callApi("answerCallbackQuery",{text:t,show_alert:r,callback_query_id:e,...s})}answerGameQuery(e,t){return this.callApi("answerCallbackQuery",{url:t,callback_query_id:e})}answerShippingQuery(e,t,r,s){return this.callApi("answerShippingQuery",{ok:t,shipping_query_id:e,shipping_options:r,error_message:s})}answerPreCheckoutQuery(e,t,r){return this.callApi("answerPreCheckoutQuery",{ok:t,pre_checkout_query_id:e,error_message:r})}editMessageText(e,t,r,s,i){return this.callApi("editMessageText",{text:s,chat_id:e,message_id:t,inline_message_id:r,...i})}editMessageCaption(e,t,r,s,i={}){return this.callApi("editMessageCaption",{caption:s,chat_id:e,message_id:t,inline_message_id:r,parse_mode:i.parse_mode,reply_markup:i.parse_mode||i.reply_markup?i.reply_markup:i})}editMessageMedia(e,t,r,s,i={}){return this.callApi("editMessageMedia",{chat_id:e,message_id:t,inline_message_id:r,media:{...s,parse_mode:i.parse_mode},reply_markup:i.reply_markup?i.reply_markup:i})}editMessageReplyMarkup(e,t,r,s){return this.callApi("editMessageReplyMarkup",{chat_id:e,message_id:t,inline_message_id:r,reply_markup:s})}editMessageLiveLocation(e,t,r,s,i,n){return this.callApi("editMessageLiveLocation",{latitude:e,longitude:t,chat_id:r,message_id:s,inline_message_id:i,reply_markup:n})}stopMessageLiveLocation(e,t,r,s){return this.callApi("stopMessageLiveLocation",{chat_id:e,message_id:t,inline_message_id:r,reply_markup:s})}deleteMessage(e,t){return this.callApi("deleteMessage",{chat_id:e,message_id:t})}setChatStickerSet(e,t){return this.callApi("setChatStickerSet",{chat_id:e,sticker_set_name:t})}deleteChatStickerSet(e){return this.callApi("deleteChatStickerSet",{chat_id:e})}getStickerSet(e){return this.callApi("getStickerSet",{name:e})}uploadStickerFile(e,t){return this.callApi("uploadStickerFile",{user_id:e,png_sticker:t})}createNewStickerSet(e,t,r,s){return this.callApi("createNewStickerSet",{name:t,title:r,user_id:e,...s})}addStickerToSet(e,t,r,s){return this.callApi("addStickerToSet",{name:t,user_id:e,is_masks:s,...r})}setStickerPositionInSet(e,t){return this.callApi("setStickerPositionInSet",{sticker:e,position:t})}setStickerSetThumb(e,t,r){return this.callApi("setStickerSetThumb",{name:e,user_id:t,thumb:r})}deleteStickerFromSet(e){return this.callApi("deleteStickerFromSet",{sticker:e})}getMyCommands(){return this.callApi("getMyCommands")}setMyCommands(e){return this.callApi("setMyCommands",{commands:e})}setPassportDataErrors(e,t){return this.callApi("setPassportDataErrors",{user_id:e,errors:t})}sendCopy(e,t,r){if(!t)throw new Error("Message is required");const i=Object.keys(s.copyMethods).find(e=>t[e]);if(!i)throw new Error("Unsupported message type");const n={chat_id:e,...s[i](t),...r};return this.callApi(s.copyMethods[i],n)}}},function(e,t,r){const{formatHTML:s}=r(7);e.exports={copyMethods:{audio:"sendAudio",contact:"sendContact",document:"sendDocument",location:"sendLocation",photo:"sendPhoto",sticker:"sendSticker",text:"sendMessage",venue:"sendVenue",video:"sendVideo",video_note:"sendVideoNote",animation:"sendAnimation",voice:"sendVoice",poll:"sendPoll"},text:e=>{const t=e.entities||[];return{reply_markup:e.reply_markup,parse_mode:t.length>0?"HTML":"",text:s(e.text,t)}},contact:e=>({reply_markup:e.reply_markup,phone_number:e.contact.phone_number,first_name:e.contact.first_name,last_name:e.contact.last_name}),location:e=>({reply_markup:e.reply_markup,latitude:e.location.latitude,longitude:e.location.longitude}),venue:e=>({reply_markup:e.reply_markup,latitude:e.venue.location.latitude,longitude:e.venue.location.longitude,title:e.venue.title,address:e.venue.address,foursquare_id:e.venue.foursquare_id}),voice:e=>{const t=e.caption_entities||[];return{reply_markup:e.reply_markup,voice:e.voice.file_id,duration:e.voice.duration,caption:s(e.caption,t),parse_mode:t.length>0?"HTML":""}},audio:e=>{const t=e.caption_entities||[];return{reply_markup:e.reply_markup,audio:e.audio.file_id,thumb:e.audio.thumb,duration:e.audio.duration,performer:e.audio.performer,title:e.audio.title,caption:s(e.caption,t),parse_mode:t.length>0?"HTML":""}},video:e=>{const t=e.caption_entities||[];return{reply_markup:e.reply_markup,video:e.video.file_id,thumb:e.video.thumb,caption:s(e.caption,t),parse_mode:t.length>0?"HTML":"",duration:e.video.duration,width:e.video.width,height:e.video.height,supports_streaming:!!e.video.supports_streaming}},document:e=>{const t=e.caption_entities||[];return{reply_markup:e.reply_markup,document:e.document.file_id,caption:s(e.caption,t),parse_mode:t.length>0?"HTML":""}},sticker:e=>({reply_markup:e.reply_markup,sticker:e.sticker.file_id}),photo:e=>{const t=e.caption_entities||[];return{reply_markup:e.reply_markup,photo:e.photo[e.photo.length-1].file_id,parse_mode:t.length>0?"HTML":"",caption:s(e.caption,t)}},video_note:e=>({reply_markup:e.reply_markup,video_note:e.video_note.file_id,thumb:e.video_note.thumb,length:e.video_note.length,duration:e.video_note.duration}),animation:e=>({reply_markup:e.reply_markup,animation:e.animation.file_id,thumb:e.animation.thumb,duration:e.animation.duration}),poll:e=>({question:e.poll.question,type:e.poll.type,is_anonymous:e.poll.is_anonymous,allows_multiple_answers:e.poll.allows_multiple_answers,correct_option_id:e.poll.correct_option_id,options:e.poll.options.map(({text:e})=>e)})}},function(e,t,r){const s=r(4)("telegraf:client"),i=r(9),n=r(24).default,o=r(25),a=r(5),c=r(26),h=r(27),u=r(28),{isStream:l}=u,d=["getChat","getChatAdministrators","getChatMember","getChatMembersCount","getFile","getFileLink","getGameHighScores","getMe","getUserProfilePhotos","getWebhookInfo","exportChatInviteLink"],p={audio:"mp3",photo:"jpg",sticker:"webp",video:"mp4",animation:"mp4",video_note:"mp4",voice:"ogg"},m={apiRoot:"https://api.telegram.org",webhookReply:!0,agent:new a.Agent({keepAlive:!0,keepAliveMsecs:1e4})},f={webhook:!0,details:"https://core.telegram.org/bots/api#making-requests-when-getting-updates"};function g(e){return Object.keys(e).some(t=>{const r=e[t];return Array.isArray(r)?r.some(({media:e})=>e&&"object"==typeof e&&(e.source||e.url)):"object"==typeof r&&(r.source||r.url||"object"==typeof r.media&&(r.media.source||r.media.url))})}const y=["results","reply_markup","mask_position","shipping_options","errors"];function b(e,t){for(const t of y)t in e&&"string"!=typeof e[t]&&(e[t]=JSON.stringify(e[t]));const r=i.randomBytes(32).toString("hex"),s=new u(r),n=Object.keys(e).map(r=>function(e,t,r,s){if(!r)return Promise.resolve();const n=typeof r;if("string"===n||"boolean"===n||"number"===n)return e.addPart({headers:{"content-disposition":`form-data; name="${t}"`},body:""+r}),Promise.resolve();if("thumb"===t){const n=i.randomBytes(16).toString("hex");return w(e,r,n,s).then(()=>e.addPart({headers:{"content-disposition":`form-data; name="${t}"`},body:"attach://"+n}))}if(Array.isArray(r))return Promise.all(r.map(t=>{if("object"!=typeof t.media)return Promise.resolve(t);const r=i.randomBytes(16).toString("hex");return w(e,t.media,r,s).then(()=>({...t,media:"attach://"+r}))})).then(r=>e.addPart({headers:{"content-disposition":`form-data; name="${t}"`},body:JSON.stringify(r)}));if(void 0!==r.media&&void 0!==r.type){const n=i.randomBytes(16).toString("hex");return w(e,r.media,n,s).then(()=>e.addPart({headers:{"content-disposition":`form-data; name="${t}"`},body:JSON.stringify({...r,media:"attach://"+n})}))}return w(e,r,t,s)}(s,r,e[r],t));return Promise.all(n).then(()=>({method:"POST",compress:!0,headers:{"content-type":"multipart/form-data; boundary="+r,connection:"keep-alive"},body:s}))}function w(e,t,r,s){let i=t.filename||`${r}.${p[r]||"dat"}`;return t.url?n(t.url,{agent:s}).then(t=>e.addPart({headers:{"content-disposition":`form-data; name="${r}"; filename="${i}"`},body:t.body})):(t.source&&(o.existsSync(t.source)&&(i=t.filename||c.basename(t.source),t.source=o.createReadStream(t.source)),(l(t.source)||Buffer.isBuffer(t.source))&&e.addPart({headers:{"content-disposition":`form-data; name="${r}"; filename="${i}"`},body:t.source})),Promise.resolve())}function _(e){return"function"==typeof e.set&&"object"==typeof e.header}e.exports=class{constructor(e,t,r){this.token=e,this.options={...m,...t},this.options.apiRoot.startsWith("http://")&&(this.options.agent=null),this.response=r}set webhookReply(e){this.options.webhookReply=e}get webhookReply(){return this.options.webhookReply}callApi(e,t={}){const{token:r,options:i,response:o,responseEnd:a}=this,c=Object.keys(t).filter(e=>void 0!==t[e]&&null!==t[e]).reduce((e,r)=>({...e,[r]:t[r]}),{});if(i.webhookReply&&o&&!a&&!d.includes(e))return s("Call via webhook",e,c),this.responseEnd=!0,function(e,t={},r){return g(t)?b(t,r.agent).then(({headers:t,body:r})=>_(e)?(Object.keys(t).forEach(r=>e.set(r,t[r])),e.body=r,Promise.resolve(f)):(e.headersSent||Object.keys(t).forEach(r=>e.setHeader(r,t[r])),new Promise(t=>{e.on("finish",()=>t(f)),r.pipe(e)}))):_(e)?(e.body=t,Promise.resolve(f)):(e.headersSent||e.setHeader("content-type","application/json"),new Promise(r=>{if(2===e.end.length)return e.end(JSON.stringify(t),"utf-8"),r(f);e.end(JSON.stringify(t),"utf-8",()=>r(f))}))}(o,{method:e,...c},i);if(!r)throw new h({error_code:401,description:"Bot Token is required"});return s("HTTP call",e,c),(g(c)?b({method:e,...c},i.agent):function(e){return Promise.resolve({method:"POST",compress:!0,headers:{"content-type":"application/json",connection:"keep-alive"},body:JSON.stringify(e)})}(c)).then(t=>{const s=`${i.apiRoot}/bot${r}/${e}`;return t.agent=i.agent,n(s,t)}).then(e=>e.text()).then(e=>function(e){try{return JSON.parse(e)}catch(e){s("JSON parse failed",e)}}(e)||{error_code:500,description:"Unsupported http response from Telegram",response:e}).then(t=>{if(!t.ok)throw s("API call failed",t),new h(t,{method:e,payload:c});return t.result})}}},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",(function(){return T})),r.d(t,"Request",(function(){return U})),r.d(t,"Response",(function(){return Q})),r.d(t,"FetchError",(function(){return d}));var s=r(0),i=r(6),n=r(3),o=r(5),a=r(1);const c=s.Readable,h=Symbol("buffer"),u=Symbol("type");class l{constructor(){this[u]="";const e=arguments[0],t=arguments[1],r=[];let s=0;if(e){const t=e,i=Number(t.length);for(let e=0;e<i;e++){const i=t[e];let n;n=i instanceof Buffer?i:ArrayBuffer.isView(i)?Buffer.from(i.buffer,i.byteOffset,i.byteLength):i instanceof ArrayBuffer?Buffer.from(i):i instanceof l?i[h]:Buffer.from("string"==typeof i?i:String(i)),s+=n.length,r.push(n)}}this[h]=Buffer.concat(r);let i=t&&void 0!==t.type&&String(t.type).toLowerCase();i&&!/[^\u0020-\u007E]/.test(i)&&(this[u]=i)}get size(){return this[h].length}get type(){return this[u]}text(){return Promise.resolve(this[h].toString())}arrayBuffer(){const e=this[h],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new c;return e._read=function(){},e.push(this[h]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],r=arguments[1];let s,i;s=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),i=void 0===r?e:r<0?Math.max(e+r,0):Math.min(r,e);const n=Math.max(i-s,0),o=this[h].slice(s,s+n),a=new l([],{type:arguments[2]});return a[h]=o,a}}function d(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}let p;Object.defineProperties(l.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(l.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="FetchError";try{p=require("encoding").convert}catch(e){}const m=Symbol("Body internals"),f=s.PassThrough;function g(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.size;let n=void 0===i?0:i;var o=r.timeout;let a=void 0===o?0:o;null==e?e=null:b(e)?e=Buffer.from(e.toString()):w(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof s||(e=Buffer.from(String(e)))),this[m]={body:e,disturbed:!1,error:null},this.size=n,this.timeout=a,e instanceof s&&e.on("error",(function(e){const r="AbortError"===e.name?e:new d(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[m].error=r}))}function y(){var e=this;if(this[m].disturbed)return g.Promise.reject(new TypeError("body used already for: "+this.url));if(this[m].disturbed=!0,this[m].error)return g.Promise.reject(this[m].error);let t=this.body;if(null===t)return g.Promise.resolve(Buffer.alloc(0));if(w(t)&&(t=t.stream()),Buffer.isBuffer(t))return g.Promise.resolve(t);if(!(t instanceof s))return g.Promise.resolve(Buffer.alloc(0));let r=[],i=0,n=!1;return new g.Promise((function(s,o){let a;e.timeout&&(a=setTimeout((function(){n=!0,o(new d(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),t.on("error",(function(t){"AbortError"===t.name?(n=!0,o(t)):o(new d(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),t.on("data",(function(t){if(!n&&null!==t){if(e.size&&i+t.length>e.size)return n=!0,void o(new d(`content size at ${e.url} over limit: ${e.size}`,"max-size"));i+=t.length,r.push(t)}})),t.on("end",(function(){if(!n){clearTimeout(a);try{s(Buffer.concat(r,i))}catch(t){o(new d(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function b(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function w(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function _(e){let t,r,i=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof s&&"function"!=typeof i.getBoundary&&(t=new f,r=new f,i.pipe(t),i.pipe(r),e[m].body=t,i=r),i}function C(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":b(e)?"application/x-www-form-urlencoded;charset=UTF-8":w(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?"multipart/form-data;boundary="+e.getBoundary():e instanceof s?null:"text/plain;charset=UTF-8"}function k(e){const t=e.body;return null===t?0:w(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}g.prototype={get body(){return this[m].body},get bodyUsed(){return this[m].disturbed},arrayBuffer(){return y.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return y.call(this).then((function(t){return Object.assign(new l([],{type:e.toLowerCase()}),{[h]:t})}))},json(){var e=this;return y.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return g.Promise.reject(new d(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return y.call(this).then((function(e){return e.toString()}))},buffer(){return y.call(this)},textConverted(){var e=this;return y.call(this).then((function(t){return function(e,t){if("function"!=typeof p)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let s,i,n="utf-8";r&&(s=/charset=([^;]*)/i.exec(r));i=e.slice(0,1024).toString(),!s&&i&&(s=/<meta.+?charset=(['"])(.+?)\1/i.exec(i));!s&&i&&(s=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(i),s&&(s=/charset=(.*)/i.exec(s.pop())));!s&&i&&(s=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(i));s&&(n=s.pop(),"gb2312"!==n&&"gbk"!==n||(n="gb18030"));return p(e,"UTF-8",n).toString()}(t,e.headers)}))}},Object.defineProperties(g.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),g.mixIn=function(e){for(const t of Object.getOwnPropertyNames(g.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor(g.prototype,t);Object.defineProperty(e,t,r)}},g.Promise=global.Promise;const v=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,S=/[^\t\x20-\x7e\x80-\xff]/;function M(e){if(e=""+e,v.test(e)||""===e)throw new TypeError(e+" is not a legal HTTP header name")}function x(e){if(e=""+e,S.test(e))throw new TypeError(e+" is not a legal HTTP header value")}function A(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const P=Symbol("map");class T{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[P]=Object.create(null),e instanceof T){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(t))}for(const e of r){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const r=e[t];this.append(t,r)}}}}get(e){M(e=""+e);const t=A(this[P],e);return void 0===t?null:this[P][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=O(this),s=0;for(;s<r.length;){var i=r[s];const n=i[0],o=i[1];e.call(t,o,n,this),r=O(this),s++}}set(e,t){t=""+t,M(e=""+e),x(t);const r=A(this[P],e);this[P][void 0!==r?r:e]=[t]}append(e,t){t=""+t,M(e=""+e),x(t);const r=A(this[P],e);void 0!==r?this[P][r].push(t):this[P][e]=[t]}has(e){return M(e=""+e),void 0!==A(this[P],e)}delete(e){M(e=""+e);const t=A(this[P],e);void 0!==t&&delete this[P][t]}raw(){return this[P]}keys(){return F(this,"key")}values(){return F(this,"value")}[Symbol.iterator](){return F(this,"key+value")}}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const r=Object.keys(e[P]).sort();return r.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[P][t].join(", ")}:function(t){return[t.toLowerCase(),e[P][t].join(", ")]})}T.prototype.entries=T.prototype[Symbol.iterator],Object.defineProperty(T.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(T.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const E=Symbol("internal");function F(e,t){const r=Object.create(R);return r[E]={target:e,kind:t,index:0},r}const R=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==R)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[E];const t=e.target,r=e.kind,s=e.index,i=O(t,r);return s>=i.length?{value:void 0,done:!0}:(this[E].index=s+1,{value:i[s],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function j(e){const t=Object.assign({__proto__:null},e[P]),r=A(e[P],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty(R,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const L=Symbol("Response internals"),B=i.STATUS_CODES;class Q{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g.call(this,e,t);const r=t.status||200,s=new T(t.headers);if(null!=e&&!s.has("Content-Type")){const t=C(e);t&&s.append("Content-Type",t)}this[L]={url:t.url,status:r,statusText:t.statusText||B[r],headers:s,counter:t.counter}}get url(){return this[L].url||""}get status(){return this[L].status}get ok(){return this[L].status>=200&&this[L].status<300}get redirected(){return this[L].counter>0}get statusText(){return this[L].statusText}get headers(){return this[L].headers}clone(){return new Q(_(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}g.mixIn(Q.prototype),Object.defineProperties(Q.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Q.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const I=Symbol("Request internals"),$=n.parse,q=n.format,W="destroy"in s.Readable.prototype;function H(e){return"object"==typeof e&&"object"==typeof e[I]}class U{constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};H(e)?t=$(e.url):(t=e&&e.href?$(e.href):$(""+e),e={});let s=r.method||e.method||"GET";if(s=s.toUpperCase(),(null!=r.body||H(e)&&null!==e.body)&&("GET"===s||"HEAD"===s))throw new TypeError("Request with GET/HEAD method cannot have body");let i=null!=r.body?r.body:H(e)&&null!==e.body?_(e):null;g.call(this,i,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const n=new T(r.headers||e.headers||{});if(null!=i&&!n.has("Content-Type")){const e=C(i);e&&n.append("Content-Type",e)}let o=H(e)?e.signal:null;if("signal"in r&&(o=r.signal),null!=o&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(o))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[I]={method:s,redirect:r.redirect||e.redirect||"follow",headers:n,parsedURL:t,signal:o},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[I].method}get url(){return q(this[I].parsedURL)}get headers(){return this[I].headers}get redirect(){return this[I].redirect}get signal(){return this[I].signal}clone(){return new U(this)}}function N(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}g.mixIn(U.prototype),Object.defineProperty(U.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(U.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),N.prototype=Object.create(Error.prototype),N.prototype.constructor=N,N.prototype.name="AbortError";const z=s.PassThrough,D=n.resolve;function V(e,t){if(!V.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return g.Promise=V.Promise,new V.Promise((function(r,n){const c=new U(e,t),h=function(e){const t=e[I].parsedURL,r=new T(e[I].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof s.Readable&&!W)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let i=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(i="0"),null!=e.body){const t=k(e);"number"==typeof t&&(i=String(t))}i&&r.set("Content-Length",i),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let n=e.agent;return"function"==typeof n&&(n=n(t)),r.has("Connection")||n||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:j(r),agent:n})}(c),u=("https:"===h.protocol?o:i).request,l=c.signal;let p=null;const m=function(){let e=new N("The user aborted a request.");n(e),c.body&&c.body instanceof s.Readable&&c.body.destroy(e),p&&p.body&&p.body.emit("error",e)};if(l&&l.aborted)return void m();const f=function(){m(),b()},g=u(h);let y;function b(){g.abort(),l&&l.removeEventListener("abort",f),clearTimeout(y)}l&&l.addEventListener("abort",f),c.timeout&&g.once("socket",(function(e){y=setTimeout((function(){n(new d("network timeout at: "+c.url,"request-timeout")),b()}),c.timeout)})),g.on("error",(function(e){n(new d(`request to ${c.url} failed, reason: ${e.message}`,"system",e)),b()})),g.on("response",(function(e){clearTimeout(y);const t=function(e){const t=new T;for(const r of Object.keys(e))if(!v.test(r))if(Array.isArray(e[r]))for(const s of e[r])S.test(s)||(void 0===t[P][r]?t[P][r]=[s]:t[P][r].push(s));else S.test(e[r])||(t[P][r]=[e[r]]);return t}(e.headers);if(V.isRedirect(e.statusCode)){const s=t.get("Location"),i=null===s?null:D(c.url,s);switch(c.redirect){case"error":return n(new d("redirect mode is set to error: "+c.url,"no-redirect")),void b();case"manual":if(null!==i)try{t.set("Location",i)}catch(e){n(e)}break;case"follow":if(null===i)break;if(c.counter>=c.follow)return n(new d("maximum redirect reached at: "+c.url,"max-redirect")),void b();const s={headers:new T(c.headers),follow:c.follow,counter:c.counter+1,agent:c.agent,compress:c.compress,method:c.method,body:c.body,signal:c.signal,timeout:c.timeout};return 303!==e.statusCode&&c.body&&null===k(c)?(n(new d("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void b()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==c.method)||(s.method="GET",s.body=void 0,s.headers.delete("content-length")),r(V(new U(i,s))),void b())}}e.once("end",(function(){l&&l.removeEventListener("abort",f)}));let s=e.pipe(new z);const i={url:c.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:c.size,timeout:c.timeout,counter:c.counter},o=t.get("Content-Encoding");if(!c.compress||"HEAD"===c.method||null===o||204===e.statusCode||304===e.statusCode)return p=new Q(s,i),void r(p);const h={flush:a.Z_SYNC_FLUSH,finishFlush:a.Z_SYNC_FLUSH};if("gzip"==o||"x-gzip"==o)return s=s.pipe(a.createGunzip(h)),p=new Q(s,i),void r(p);if("deflate"!=o&&"x-deflate"!=o){if("br"==o&&"function"==typeof a.createBrotliDecompress)return s=s.pipe(a.createBrotliDecompress()),p=new Q(s,i),void r(p);p=new Q(s,i),r(p)}else{e.pipe(new z).once("data",(function(e){s=8==(15&e[0])?s.pipe(a.createInflate()):s.pipe(a.createInflateRaw()),p=new Q(s,i),r(p)}))}})),function(e,t){const r=t.body;null===r?e.end():w(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}(g,c)}))}V.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},V.Promise=global.Promise,t.default=V},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t){class r extends Error{constructor(e={},t){super(`${e.error_code}: ${e.description}`),this.code=e.error_code,this.response=e,this.description=e.description,this.parameters=e.parameters||{},this.on=t||{}}}e.exports=r},function(e,t,r){const s=r(0),{SandwichStream:i}=r(29);class n extends i{constructor(e){super({head:`--${e}\r\n`,tail:`\r\n--${e}--`,separator:`\r\n--${e}\r\n`})}addPart(e){e=e||{};const t=new s.PassThrough;if(e.headers)for(const r in e.headers){const s=e.headers[r];t.write(`${r}:${s}\r\n`)}t.write("\r\n"),n.isStream(e.body)?e.body.pipe(t):t.end(e.body),this.add(t)}static isStream(e){return e&&"object"==typeof e&&"function"==typeof e.pipe}}e.exports=n},function(e,t,r){"use strict";r.r(t),r.d(t,"SandwichStream",(function(){return i}));const{Readable:s}=require("stream");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */class i extends s{constructor(e){var{head:t,tail:r,separator:s}=e;super(function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&(r[s[i]]=e[s[i]])}return r}(e,["head","tail","separator"])),this.streamsActive=!1,this.streams=[],this.newStreams=[],this.currentStream=null,this.head=null!=t?t:null,this.tail=null!=r?r:null,this.separator=null!=s?s:null}add(e){return!1===this.streamsActive?(this.streams.push(e),e.on("error",this.subStreamOnError.bind(this))):this.newStreams.push(e),this}_read(){!1===this.streamsActive&&(this.streamsActive=!0,this.pushHead(),this.streamNextStream())}subStreamOnError(e){this.emit("error",e)}streamNextStream(){!0===this.nextStream()?this.bindCurrentStreamEvents():(this.pushTail(),this.push(null))}nextStream(){const e=this.streams.shift();return this.currentStream=void 0!==e?e:null,null!==this.currentStream}bindCurrentStreamEvents(){this.currentStream.on("readable",this.currentStreamOnReadable.bind(this)),this.currentStream.on("end",this.currentStreamOnEnd.bind(this))}currentStreamOnReadable(){const e=this.currentStream.read(),t=null!=e?e:"";this.push(t)}currentStreamOnEnd(){this.pushSeparator(),this.streams.concat(this.newStreams),this.newStreams=[],this.streamNextStream()}pushHead(){null!==this.head&&this.push(this.head)}pushSeparator(){0<this.streams.length&&null!==this.separator&&this.push(this.separator)}pushTail(){null!==this.tail&&this.push(this.tail)}}t.default=i},function(e,t,r){const s=r(7);class i{constructor(e){this.load(e)}load(e={}){return Object.assign(this,e)}inReplyTo(e){return this.reply_to_message_id=e,this}notifications(e=!0){return this.disable_notification=!e,this}webPreview(e=!0){return this.disable_web_page_preview=!e,this}markup(e){return"function"==typeof e&&(e=e(new s)),this.reply_markup={...e},this}HTML(e=!0){return this.parse_mode=e?"HTML":void 0,this}markdown(e=!0){return this.parse_mode=e?"Markdown":void 0,this}caption(e=""){return this.caption=e,this}static inReplyTo(e){return(new i).inReplyTo(e)}static notifications(e){return(new i).notifications(e)}static webPreview(e){return(new i).webPreview(e)}static load(e){return new i(e)}static markup(e){return(new i).markup(e)}static HTML(e){return(new i).HTML(e)}static markdown(e){return(new i).markdown(e)}static caption(e){return(new i).caption(e)}}i.Markup=s,e.exports=i},function(e,t){e.exports=function(e){const t={property:"session",store:new Map,getSessionKey:e=>e.from&&e.chat&&`${e.from.id}:${e.chat.id}`,...e},r=t.ttl&&1e3*t.ttl;return(e,s)=>{const i=t.getSessionKey(e);if(!i)return s(e);const n=Date.now();return Promise.resolve(t.store.get(i)).then(e=>e||{session:{}}).then(({session:o,expires:a})=>(a&&a<n&&(o={}),Object.defineProperty(e,t.property,{get:function(){return o},set:function(e){o={...e}}}),s(e).then(()=>t.store.set(i,{session:o,expires:r?n+r:null}))))}}},function(e,t,r){const{compose:s,lazy:i,passThru:n}=r(2);e.exports=class{constructor(e,t=new Map){if(!e)throw new Error("Missing routing function");this.routeFn=e,this.handlers=t,this.otherwiseHandler=n()}on(e,...t){if(0===t.length)throw new TypeError("At least one handler must be provided");return this.handlers.set(e,s(t)),this}otherwise(...e){if(0===e.length)throw new TypeError("At least one otherwise handler must be provided");return this.otherwiseHandler=s(e),this}middleware(){return i(e=>Promise.resolve(this.routeFn(e)).then(t=>t&&t.route&&this.handlers.has(t.route)?(Object.assign(e,t.context),Object.assign(e.state,t.state),this.handlers.get(t.route)):this.otherwiseHandler))}}},function(e,t,r){const s=r(34),i=r(2),{compose:n,optional:o,lazy:a,safePassThru:c}=i;e.exports=class extends i{constructor(e=[],t){super(),this.options={sessionName:"session",...t},this.scenes=new Map,e.forEach(e=>this.register(e))}register(...e){return e.forEach(e=>{if(!e||!e.id||"function"!=typeof e.middleware)throw new Error("telegraf: Unsupported scene");this.scenes.set(e.id,e)}),this}middleware(){const e=n([(e,t)=>(e.scene=new s(e,this.scenes,this.options),t()),super.middleware(),a(e=>e.scene.current||c())]);return o(e=>e[this.options.sessionName],e)}static enter(...e){return t=>t.scene.enter(...e)}static reenter(...e){return t=>t.scene.reenter(...e)}static leave(...e){return t=>t.scene.leave(...e)}}},function(e,t,r){const s=r(4)("telegraf:scenes:context"),{safePassThru:i}=r(2),n=()=>Promise.resolve(),o=()=>Math.floor(Date.now()/1e3);e.exports=class{constructor(e,t,r){this.ctx=e,this.scenes=t,this.options=r}get session(){const e=this.options.sessionName;let t=this.ctx[e].__scenes||{};return t.expires<o()&&(t={}),this.ctx[e].__scenes=t,t}get state(){return this.session.state=this.session.state||{},this.session.state}set state(e){this.session.state={...e}}get current(){const e=this.session.current||this.options.default;return e&&this.scenes.has(e)?this.scenes.get(e):null}reset(){const e=this.options.sessionName;delete this.ctx[e].__scenes}enter(e,t,r){if(!e||!this.scenes.has(e))throw new Error("Can't find scene: "+e);return(r?n():this.leave()).then(()=>{s("Enter scene",e,t,r),this.session.current=e,this.state=t;const i=this.current.ttl||this.options.ttl;return i&&(this.session.expires=o()+i),r?Promise.resolve():("function"==typeof this.current.enterMiddleware?this.current.enterMiddleware():this.current.middleware())(this.ctx,n)})}reenter(){return this.enter(this.session.current,this.state)}leave(){return s("Leave scene"),(this.current&&this.current.leaveMiddleware?this.current.leaveMiddleware():i())(this.ctx,n).then(()=>this.reset())}}},function(e,t,r){const s=r(2),{compose:i}=s;e.exports=class extends s{constructor(e,t){const r={handlers:[],enterHandlers:[],leaveHandlers:[],...t};super(...r.handlers),this.id=e,this.options=r,this.enterHandler=i(r.enterHandlers),this.leaveHandler=i(r.leaveHandlers)}set ttl(e){this.options.ttl=e}get ttl(){return this.options.ttl}enter(...e){return this.enterHandler=i([this.enterHandler,...e]),this}leave(...e){return this.leaveHandler=i([this.leaveHandler,...e]),this}enterMiddleware(){return this.enterHandler}leaveMiddleware(){return this.leaveHandler}}},function(e,t,r){const s=r(4)("telegraf:webhook");e.exports=function(e,t,r){return(i,n,o)=>{if(s("Incoming request",i.method,i.url),"POST"!==i.method||i.url!==e)return"function"==typeof o?o():(n.statusCode=403,n.end());let a="";i.on("data",e=>{a+=e.toString()}),i.on("end",()=>{let e={};try{e=JSON.parse(a)}catch(e){return n.writeHead(415),n.end(),r(e)}t(e,n).then(()=>{n.finished||n.end()}).catch(e=>{s("Webhook error",e),n.writeHead(500),n.end()})})}}}]));